# A development environment using PHP 8.1 Docker and Docker Compose with PHP-FPM, Nginx and running a separate Mariadb container.

The following stack will be created:

- A network named mariadb_database_service_network

Container 1
- A `mariadb` service running Mariadb.

Container 2
- A `php8` service running PHP 8 FPM.

- An `nginx` service running Nginx




## Requirements

- Docker
- Docker Compose


## Running the environment

To build and run the services run the following from command line

```bash
cd mariadb
docker compose up -d

cd ../nginx
docker compose up -d
```

## Mariadb

This service is set up to use port 3306 by default.

Rename or copy .env.example to .env and change the root password, username, and user password. Example


```bash
DB_CONNECTION=mysql
DB_HOST=mariadb
DB_PORT=3306
DB_ROOT_HOST=%
DB_ROOT_PASSWORD=My_Super_Awesome_Password_For-Root_User
DB_DATABASE=database
DB_USERNAME=beetlejuce
DB_PASSWORD=Beetlejuce_Beetlejuce_Beetlejuce
```


## Nginx

This service is set up to use port 80 by default.
In your browser enter your serverâ€™s domain name or IP address for the url. If you are on your local computer try localhost.

```bash
localhost
```

You can use the logs command to check the logs generated by your services:

```bash
docker compose logs nginx
```


## Php database editor

By default there is no database editors in the environment.
You can either download an editor such as [Adminer](https://www.adminer.org/) and put the php file in the public directory.
If you added to the public directory you need to enter that filename to access it

```bash
localhost/adminer-4.8.1-mysql.php
```


You can add one to the stack in the docker-compose.yml file just above the networks: section.

```bash
    # phpMyAdmin Service
    phpmyadmin:
        image: phpmyadmin/phpmyadmin:latest
        ports:
            - 8080:80
        environment:
            PMA_HOST: mariadb
        networks:
            - mariadb_database_service_network
```

If you added to the docker-compose.yml file you need to use port 8080 to access it.

```bash
localhost:8080
```

Use mariadb for the server name if needed, for example Adminer uses localhost for the server by default but you need to enter mariadb to connect to the database container.


## Some Docker Commands

You can run the services in background mode with:

```bash
docker compose up -d
```

You can stop the services with:

```bash
docker compose stop
```

You can remove the services with:

```bash
docker compose down
```

To get information about the state of your active services, run:

```bash
docker compose ps
```

You can use the `docker-compose exec` command to execute commands in the service containers.

```bash
docker compose exec php ls -l
```

Shows detailed information about files in the application directory

To pause the environment while keeping the state of all its services, run:

```bash
docker compose pause
```

- You can then resume your services with:

```bash
docker compose unpause
```
